<h2>
  <%= @script %>
  <% if @script.core %>
    <small class="pull-right">
      <span class="glyphicon glyphicon-star" title="<%= Script.human_attribute_name 'core' %>"></span>
    </small>
  <% end %>
</h2>

<% if @script.file.present? %>
  <p>
    <strong><%= Script.human_attribute_name 'file' %></strong>:
    <%= link_to t('messages.download'), @script.file.url %>
  </p>
<% end %>

<% if @script.text.present? %>
  <textarea name="script[text]" id="script_text" class="hidden"><%= @script.text %></textarea>
  <div class="editor" data-readonly="true"></div>
<% end %>

<% if @script.requires.any? %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">
        <%= Require.model_name.human count: @script.requires.size %>
      </h3>
    </div>
    <div id="requires" class="panel-body">
      <ul>
        <% @script.requires.each do |require| %>
          <li><%= link_to require.script, require.script %></li>
        <% end %>
      </ul>
    </div>
  </div>
<% end %>

<% if @script.tags.any? %>
  <ul class="list-inline">
    <% @script.tags.each do |tag| %>
      <li>
        <span class="label label-<%= tag.style %>"><%= tag %></span>
      </li>
    <% end %>
  </ul>
<% end %>

<% if @script.parameters.any? %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">
        <%= Parameter.model_name.human count: @script.parameters.size %>
      </h3>
    </div>
    <div id="parameters" class="panel-body">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th><%= Parameter.human_attribute_name 'name' %></th>
            <th><%= Parameter.human_attribute_name 'value' %></th>
          </tr>
        </thead>
        <tbody>
          <% @script.parameters.each do |parameter| %>
            <tr>
              <td><%= parameter.name %></td>
              <td><%= parameter.value %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>

<% if @script.descriptions.any? %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">
        <%= Description.model_name.human count: @script.descriptions.size %>
      </h3>
    </div>
    <div id="descriptions" class="panel-body">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th><%= Description.human_attribute_name 'name' %></th>
            <th><%= Description.human_attribute_name 'value' %></th>
          </tr>
        </thead>
        <tbody>
          <% @script.descriptions.each do |description| %>
            <tr>
              <td><%= description.name %></td>
              <td><%= description.value %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>

<%= link_to_edit [:edit, @script] %> |
<%= link_to_index scripts_path %>
